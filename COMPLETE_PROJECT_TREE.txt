HELPDESK TICKETING SYSTEM - Complete File Tree
==============================================

helpdesk-ticketing-app/
â”‚
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ docker-compose.yml                  # Local development with Docker Compose
â”œâ”€â”€ ğŸ“œ deploy-openshift.sh                 # Automated OpenShift deployment script
â”‚
â”œâ”€â”€ ğŸ“š Documentation/
â”‚   â”œâ”€â”€ ğŸ“„ INDEX.md                        # Complete project index & navigation
â”‚   â”œâ”€â”€ ğŸ“„ README.md                       # Main documentation
â”‚   â”œâ”€â”€ ğŸ“„ DEPLOYMENT.md                   # Detailed deployment guide
â”‚   â”œâ”€â”€ ğŸ“„ DEMO_SCRIPT.md                  # Step-by-step demo (30-40 min)
â”‚   â”œâ”€â”€ ğŸ“„ QUICK_START.md                  # Quick reference with exact oc commands
â”‚   â”œâ”€â”€ ğŸ“„ PROJECT_SUMMARY.md              # Complete technical summary
â”‚   â””â”€â”€ ğŸ“„ COMPLETE_PROJECT_TREE.txt       # This file
â”‚
â”œâ”€â”€ ğŸ”§ backend/                             # NestJS Backend API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ auth/                          # Authentication Module
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ signup.dto.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.dto.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password.dto.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ reset-password.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ change-password.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ strategies/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ jwt.strategy.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ guards/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ jwt-auth.guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ auth.module.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tickets/                       # Tickets Module
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-ticket.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ update-ticket.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ tickets.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ tickets.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ tickets.module.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ email/                         # Email Service
â”‚   â”‚   â”‚   â”œâ”€â”€ email.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ email.module.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ prisma/                        # Prisma Service
â”‚   â”‚   â”‚   â”œâ”€â”€ prisma.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ prisma.module.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ app.module.ts
â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”œâ”€â”€ schema.prisma                  # Database Schema (4 models)
â”‚   â”‚   â””â”€â”€ migrations/                    # Auto-generated by Prisma
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json
â”‚   â”œâ”€â”€ ğŸ“„ nest-cli.json
â”‚   â”œâ”€â”€ ğŸ“„ .env.example
â”‚   â””â”€â”€ ğŸ³ Dockerfile
â”‚
â”œâ”€â”€ ğŸ“§ mailer/                              # NestJS Email Worker Service
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”‚   â”œâ”€â”€ prisma.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ prisma.module.ts
â”‚   â”‚   â”œâ”€â”€ mailer.service.ts              # Polls email_outbox & sends emails
â”‚   â”‚   â”œâ”€â”€ app.module.ts
â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma                  # Same schema as backend
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json
â”‚   â”œâ”€â”€ ğŸ“„ nest-cli.json
â”‚   â”œâ”€â”€ ğŸ“„ .env.example
â”‚   â””â”€â”€ ğŸ³ Dockerfile
â”‚
â”œâ”€â”€ ğŸ¨ frontend/                            # React Frontend (Vite)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ProtectedRoute.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ Signup.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ForgotPassword.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ResetPassword.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChangePassword.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Tickets.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ api.ts                     # API client with auth
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ main.tsx
â”‚   â”‚   â”œâ”€â”€ index.css
â”‚   â”‚   â””â”€â”€ vite-env.d.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ index.html
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json
â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.node.json
â”‚   â”œâ”€â”€ ğŸ“„ vite.config.ts
â”‚   â”œâ”€â”€ ğŸ“„ nginx.conf
â”‚   â””â”€â”€ ğŸ³ Dockerfile
â”‚
â””â”€â”€ â˜¸ï¸  openshift/                          # OpenShift Deployment Configs
    â”œâ”€â”€ 00-imagestreams.yaml               # ImageStreams for api, mailer, frontend
    â”œâ”€â”€ 01-namespace.yaml                  # Namespace: helpdesk
    â”œâ”€â”€ 02-secrets.yaml                    # Secrets: postgres-secret, app-secret
    â”œâ”€â”€ 03-configmaps.yaml                 # ConfigMaps: api-config, mailer-config
    â”œâ”€â”€ 04-postgres-pvc.yaml               # PersistentVolumeClaim (5Gi)
    â”œâ”€â”€ 05-postgres-deployment.yaml        # DeploymentConfig for PostgreSQL
    â”œâ”€â”€ 06-postgres-service.yaml           # Service for PostgreSQL
    â”œâ”€â”€ 07-mailhog-deployment.yaml         # DeploymentConfig for MailHog
    â”œâ”€â”€ 08-mailhog-service.yaml            # Service for MailHog
    â”œâ”€â”€ 09-mailhog-route.yaml              # Route for MailHog UI (HTTPS)
    â”œâ”€â”€ 10-api-deployment.yaml             # DeploymentConfig for API (2 replicas)
    â”œâ”€â”€ 11-api-service.yaml                # Service for API
    â”œâ”€â”€ 12-api-route.yaml                  # Route for API (HTTPS)
    â”œâ”€â”€ 13-mailer-deployment.yaml          # DeploymentConfig for Mailer
    â”œâ”€â”€ 14-frontend-deployment.yaml        # DeploymentConfig for Frontend (2 replicas)
    â”œâ”€â”€ 15-frontend-service.yaml           # Service for Frontend
    â””â”€â”€ 16-frontend-route.yaml             # Route for Frontend (HTTPS)

================================================================================
STATISTICS
================================================================================

Backend Files:        18 files (src/ + config)
Mailer Files:          8 files (src/ + config)
Frontend Files:       15 files (src/ + config)
OpenShift Configs:    17 YAML files
Documentation:         7 files
Scripts:               2 files (deploy-openshift.sh, docker-compose.yml)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:               ~67 files

Lines of Code (approx):
  Backend:           ~800 lines
  Mailer:            ~200 lines
  Frontend:          ~1,200 lines
  OpenShift:         ~700 lines
  Documentation:     ~2,500 lines
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  TOTAL:            ~5,400 lines

================================================================================
MICROSERVICES (5)
================================================================================

1. Frontend (React + Vite)
   - Port: 8080
   - Replicas: 2 (scalable)
   - Health: /health endpoint
   - Tech: React 18, React Router, Nginx

2. Backend API (NestJS)
   - Port: 3000
   - Replicas: 2 (scalable to 10+)
   - Health: Liveness & Readiness probes
   - Tech: NestJS 10, Prisma 5, JWT, Argon2

3. Mailer Worker (NestJS)
   - Port: N/A (background service)
   - Replicas: 1
   - Function: Polls email_outbox every 5s
   - Tech: NestJS 10, Nodemailer

4. PostgreSQL (Database)
   - Port: 5432
   - Replicas: 1
   - Storage: 5Gi PVC
   - Tech: PostgreSQL 16-alpine

5. MailHog (SMTP Testing)
   - Ports: 1025 (SMTP), 8025 (UI)
   - Replicas: 1
   - Function: Email testing/viewing
   - Tech: MailHog

================================================================================
DATABASE SCHEMA (4 Models)
================================================================================

1. users
   - id (UUID, PK)
   - email (unique)
   - password (hashed with Argon2)
   - firstName, lastName (optional)
   - createdAt, updatedAt

2. tickets
   - id (UUID, PK)
   - userId (FK â†’ users)
   - title, description
   - status (ENUM: OPEN, IN_PROGRESS, DONE)
   - createdAt, updatedAt

3. password_reset_tokens
   - id (UUID, PK)
   - userId (FK â†’ users)
   - tokenHash (unique, indexed)
   - expiresAt, used
   - createdAt

4. email_outbox
   - id (UUID, PK)
   - to, subject, body
   - sent (boolean, indexed)
   - sentAt, error, attempts
   - createdAt, updatedAt

================================================================================
API ENDPOINTS (8)
================================================================================

Authentication (5):
  POST /auth/signup
  POST /auth/login
  POST /auth/forgot-password
  POST /auth/reset-password
  POST /auth/change-password [requires JWT]

Tickets (3):
  POST   /tickets          [requires JWT]
  GET    /tickets          [requires JWT]
  PATCH  /tickets/:id      [requires JWT]

================================================================================
OPENSHIFT RESOURCES
================================================================================

Namespace:              1 (helpdesk)
ImageStreams:           3 (api, mailer, frontend)
Secrets:                2 (postgres-secret, app-secret)
ConfigMaps:             2 (api-config, mailer-config)
PersistentVolumeClaims: 1 (postgres-pvc: 5Gi)
DeploymentConfigs:      5 (postgres, mailhog, api, mailer, frontend)
Services:               5 (one for each DeploymentConfig)
Routes:                 3 (frontend, api, mailhog - all HTTPS)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:                 22 resources

================================================================================
FEATURES IMPLEMENTED
================================================================================

âœ… Authentication Workflows:
   - User signup with welcome email
   - Login with JWT (7-day expiry)
   - Forgot password (email-based reset)
   - Reset password (secure tokens, 1-hour expiry)
   - Change password (authenticated users)

âœ… Ticketing System:
   - Create tickets
   - View user's own tickets
   - Update ticket status (OPEN/IN_PROGRESS/DONE)

âœ… Email Service:
   - Queue-based (writes to email_outbox table)
   - Separate mailer worker service
   - Polls every 5 seconds
   - Retry mechanism (max 5 attempts)
   - Error tracking
   - MailHog integration for testing

âœ… Microservices Architecture:
   - 5 independent containerized services
   - PostgreSQL with persistent storage
   - Horizontal scaling support (API, Frontend)
   - Health checks (liveness, readiness)
   - Resource limits configured

âœ… OpenShift Deployment:
   - DeploymentConfigs with triggers
   - Services for internal communication
   - Routes for external access (HTTPS)
   - Secrets for sensitive data
   - ConfigMaps for configuration
   - PVC for database persistence

âœ… Security:
   - Argon2 password hashing
   - JWT authentication
   - Secure password reset tokens (hashed)
   - Input validation (class-validator)
   - SQL injection prevention (Prisma ORM)
   - CORS configuration
   - Protected routes
   - Email enumeration prevention

================================================================================
DEPLOYMENT METHODS
================================================================================

1. Automated (Recommended):
   ./deploy-openshift.sh

2. Manual Step-by-Step:
   oc apply -f openshift/01-namespace.yaml
   oc apply -f openshift/00-imagestreams.yaml
   oc apply -f openshift/02-secrets.yaml
   # ... (17 total files)

3. Local Development:
   docker-compose up -d

================================================================================
SCALING DEMONSTRATION
================================================================================

Current: 2 API replicas, 2 Frontend replicas

Scale Up:
  oc scale dc/api --replicas=5 -n helpdesk
  oc scale dc/frontend --replicas=4 -n helpdesk

Verify:
  oc get pods -l app=api -n helpdesk
  oc get pods -l app=frontend -n helpdesk

Test:
  curl https://$(oc get route api -o jsonpath='{.spec.host}')
  # Application continues working seamlessly

Scale Down:
  oc scale dc/api --replicas=2 -n helpdesk
  oc scale dc/frontend --replicas=2 -n helpdesk

Result: Zero downtime, stateless design enables infinite horizontal scaling

================================================================================
DEMO FLOW (30-40 minutes)
================================================================================

1. User Registration (5 min)
   â†’ Signup form â†’ Welcome email in MailHog

2. Login & Logout (2 min)
   â†’ Login â†’ JWT stored â†’ Logout

3. Password Reset (5 min)
   â†’ Forgot password â†’ Email with reset link â†’ Reset password â†’ Login

4. Change Password (3 min)
   â†’ Change password form â†’ Verify old password â†’ Update

5. Ticket Management (5 min)
   â†’ Create 3 tickets â†’ Update statuses â†’ View list

6. Architecture (5 min)
   â†’ Show 5 microservices â†’ Explain data flow â†’ View logs

7. Scaling Demo (5 min)
   â†’ Scale API 2â†’5 replicas â†’ Test functionality â†’ Scale back

8. Email System (5 min)
   â†’ Show email_outbox table â†’ Watch mailer logs â†’ View MailHog

9. Database Persistence (3 min)
   â†’ Restart pod â†’ Verify data persists

10. Q&A (5-10 min)

================================================================================
DOCUMENTATION STRUCTURE
================================================================================

START HERE â†’ INDEX.md
   â”œâ”€â”€ Quick Start â†’ QUICK_START.md (exact oc commands)
   â”œâ”€â”€ Main Docs â†’ README.md (architecture & features)
   â”œâ”€â”€ Deployment â†’ DEPLOYMENT.md (detailed guide)
   â”œâ”€â”€ Demo â†’ DEMO_SCRIPT.md (step-by-step)
   â”œâ”€â”€ Technical â†’ PROJECT_SUMMARY.md (deep dive)
   â””â”€â”€ Tree â†’ COMPLETE_PROJECT_TREE.txt (this file)

================================================================================
TECHNOLOGIES
================================================================================

Backend:
  - NestJS 10.3.0 (Node.js framework)
  - Prisma 5.8.0 (ORM)
  - Argon2 0.31.2 (password hashing)
  - JWT (authentication)
  - Passport (auth strategies)
  - class-validator (input validation)

Frontend:
  - React 18.2.0
  - Vite 5.0.11 (build tool)
  - React Router 6.21.1
  - Fetch API (HTTP client)
  - Nginx Alpine (web server)

Database:
  - PostgreSQL 16-alpine
  - Prisma migrations

Email:
  - Nodemailer 6.9.8
  - MailHog (testing)

Infrastructure:
  - Docker (containerization)
  - OpenShift 4.x (Kubernetes distribution)
  - DeploymentConfigs (OpenShift native)
  - PersistentVolumeClaim (storage)
  - Routes (ingress)

================================================================================
RESOURCE USAGE
================================================================================

Per-Pod Resources:
  API:         250m CPU / 512Mi RAM (request/limit)
  Mailer:      100m CPU / 256Mi RAM
  Frontend:    50m CPU / 128Mi RAM
  PostgreSQL:  250m CPU / 512Mi RAM
  MailHog:     50m CPU / 128Mi RAM

Total Minimum:
  CPU:    ~750m (0.75 cores)
  Memory: ~768Mi (768 MB)

With Scaling (5 API, 4 Frontend):
  CPU:    ~1.9 cores
  Memory: ~2.3 GB

================================================================================
CONTACT & SUPPORT
================================================================================

Documentation:
  - README.md - Main documentation
  - DEPLOYMENT.md - Deployment guide
  - DEMO_SCRIPT.md - Demo walkthrough
  - QUICK_START.md - Quick reference

Version: 1.0.0
Status:  âœ… Production Ready
Created: 2026-01-13

================================================================================
END OF PROJECT TREE
================================================================================
